if theme.fancybox == true
  script(type='text/javascript', src='//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.pack.js', async)
  script(type='text/javascript', src=url_for(theme.js) + '/fancybox.js' + '?v=' + theme.version, async)
  link(rel='stylesheet', type='text/css', href=url_for(theme.css) + '/jquery.fancybox.css' + '?v=' + theme.version)

if theme.cyid
  script(type='text/javascript', src='https://cy-cdn.kuaizhan.com/js/??lib/jquery.js,changyan.labs.https.js?appid=#{theme.cyid}', async)
  script.
      (function () {
          var appid = '#{theme.cyid}';
          var conf = '#{theme.cyconf}';
          var width = window.innerWidth || document.documentElement.clientWidth;
          if (width < 960) {
              var head = document.getElementsByTagName('head')[0]||document.head||document.documentElement;
              var script = document.createElement('script');
              script.type = 'text/javascript';
              script.charset = 'utf-8';
              script.id = 'changyan_mobile_js';
              script.src = 'https://cy-cdn.kuaizhan.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf;
              head.appendChild(script);
          } else {
              var loadJs=function(d,a){
              var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;
              var b=document.createElement("script");
              b.setAttribute("type","text/javascript");
              b.setAttribute("charset","UTF-8");b.setAttribute("src",d);
              if(typeof a==="function"){
                if(window.attachEvent){
                  b.onreadystatechange=function(){
                    var e=b.readyState;
                    if(e==="loaded"||e==="complete"){
                      b.onreadystatechange=null;
                      a();
                    }
                  }
                  }else{
                    b.onload=a
                  }
                }
                c.appendChild(b)
              };
            loadJs("https://cy-cdn.kuaizhan.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})});
          }
      })();

if theme.tinysou
  script.
    var option = {
      engineKey: '#{theme.tinysou}'
    };
    (function(w,d,t,u,n,s,e){
      s = d.createElement(t);
      s.src = u;
      s.async = 1;
      w[n] = function(r){
        w[n].opts = r;
      };
      e = d.getElementsByTagName(t)[0];
      e.parentNode.insertBefore(s, e);
    })(window,document,'script','//tinysou-cdn.b0.upaiyun.com/ts.js','_ts');
    _ts(option);

if theme.swiftype
  script.
    (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
    })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

    _st('install','#{theme.swiftype}','2.0.0');

if theme.self_search == true
  script(type='text/javascript', src=url_for(theme.js) + '/search.js' + '?v=' + theme.version)
  script.
     var search_path = '#{config.search.path}';
     if (search_path.length == 0) {
        search_path = 'search.xml';
     }
     var path = '#{config.root}' + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');

if theme.google_analytics
  script.
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create','#{theme.google_analytics}','auto');ga('send','pageview');

if theme.baidu_analytics
  script.
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?#{theme.baidu_analytics}";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
      })();

if page.mathjax
  include mathjax

if page.mathjax2
  include mathjax2

script(type='text/javascript', src=url_for(theme.js) + '/codeblock-resizer.js' + '?v=' + theme.version)
script(type='text/javascript', src=url_for(theme.js) + '/smartresize.js' + '?v=' + theme.version)
