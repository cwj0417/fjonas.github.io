---
title: es6 in depth éå†å™¨ å’Œ for-of å¾ªç¯
date: 2016-09-10 17:21:37
categories: ä»£ç 
tags: [ES2015,es6-in-depth,ç¿»è¯‘]
---

ä½ æ˜¯å¦‚ä½•å¾ªç¯ä¸€ä¸ªæ•°ç»„çš„å…ƒç´ çš„å‘¢ï¼Ÿ ç”¨javascriptçš„è¯, 20å¹´å‰ä½ å¯èƒ½æ˜¯è¿™ä¹ˆåšçš„ï¼š

```js
for (var index = 0; index < myArray.length; index++) {
	console.log(myArray[index]);
}
```

è‡ªä»æœ‰äº†es5, ä½ å¯ä»¥ç”¨å†…ç½®çš„`forEach`æ–¹æ³•ï¼š

```js
myArray.forEach(function(value) {
	console.log(value);
});
```
è¿™æ ·ä»£ç é‡å°‘äº†ä¸€ç‚¹, ä½†ä¹Ÿæœ‰äº†ä¸€ä¸ªå°é—®é¢˜ï¼š å¾ªç¯çš„æ—¶å€™ä¸èƒ½ç”¨`break`è¯­å¥æˆ–ç”¨`return`è¯­å¥æ¥é€€å‡ºå½“å‰æ–¹æ³•ã€‚

å¦‚æœå¯ä»¥ä½¿ç”¨forå¾ªç¯è¯­æ³•æ¥å¾ªç¯æ•°ç»„å…ƒç´ é‚£å°±å¥½äº†ã€‚

`for-in`å¾ªç¯å¼ å•¥æ ·ï¼Ÿï¼ˆå¦‚ä¸‹ï¼‰

```js
for (var index in myArray) {   //äº‹å®ä¸Šå¹¶ä¸èƒ½è¿™ä¹ˆå¹²
	console.log(myArray[index]);
}
```

è¿™æ˜¯ä¸ªåä¸»æ„å› ä¸ºï¼š

+ åœ¨è¿™ç§ä»£ç é‡Œ`index`æ¥å—åˆ°çš„å‚æ•°æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„`"0"`,`"1"`,`"2"`ç­‰ç­‰, å¹¶ä¸æ˜¯æ•°å­—ã€‚ å¦‚æœä½ ä¸æƒ³å‘ç”Ÿå­—ç¬¦ä¸²è®¡ç®—çš„è¯ï¼ˆ`"2" + 1 == "21"`ï¼‰, è¿™ç§ä»£ç æœ€ä¸æ–¹ä¾¿äº†ã€‚

+ è¿™æ ·çš„ä»£ç æ‰§è¡Œå¾—åˆ°çš„ä¸åªæ˜¯æ•°ç»„çš„å…ƒç´ , è¿˜èƒ½å¾—åˆ°å…¶ä»–è¢«äººåŠ ä¸Šçš„[expando](https://developer.mozilla.org/en-US/docs/Glossary/Expando)å±æ€§ã€‚ æ¯”æ–¹ï¼š ä½ çš„æ•°ç»„æœ‰ä¸ªå¯è¢«æšä¸¾(enumerable)çš„å±æ€§`myArray.name`, é‚£ä¹ˆè¿™ä¸ªå¾ªç¯ä¼šçŸ¥é“åˆ°ä¸€æ¬¡é¢å¤–çš„`index == "name"`ã€‚ åªè¦åœ¨æ•°ç»„åŸå‹é“¾ä¸Šçš„å±æ€§å¯ä»¥è¢«è®¿é—®ã€‚

+ å…¶ä¸­æœ€è®©äººå’‹èˆŒçš„æ˜¯, åœ¨æŸäº›æƒ…å†µä¸‹, è¿™ä¸ªå¾ªç¯æ•°ç»„å…ƒç´ çš„é¡ºåºæ˜¯éšæœºçš„ã€‚

æ€»çš„æ¥è¯´, `for-in`æ˜¯ä¸ºäº†éå†åŸç”Ÿçš„`Object`å¯¹è±¡çš„å­—ç¬¦ä¸²ç±»å‹çš„é”®è®¾è®¡çš„ã€‚ å¯¹äº`Array`æ¥è¯´å¹¶ä¸æ€ä¹ˆèƒ½ä½¿ç”¨ã€‚

## for-ofå¾ªç¯

è®°å¾—æˆ‘ä¸Šå‘¨æ‰“èµŒes6ä¼šæ‰“ç ´ä½ ä¹‹å‰å†™çš„jsçš„æ ·å­ã€‚ å¥½äº†, ä¸€ä¸‡ä¸ªç½‘ç«™éƒ½æ˜¯ç”¨`for-in`çš„, ç”šè‡³ä½œç”¨åœ¨æ•°ç»„ä¸Šã€‚ è€Œä¸”ä»æ¥æ²¡æœ‰ä»»ä½•æƒ³â€œä¿®å¤â€`for-in`åœ¨æ•°ç»„ä¸Šè¡Œä¸ºçš„è¯¾é¢˜ã€‚ es6å”¯ä¸€æ¥æ”¹è¿›è¿™ä¸ªè¡Œä¸ºçš„æ–¹æ³•æ˜¯å¦‚ä¸‹çš„æ–°çš„å¾ªç¯è¯­æ³•ï¼š

```js
for (var value of myArray) {
	console.log(value);
}
```

å—¯å—¯, çœ‹äº†å†™æ³•ä»¥å, æ„Ÿè§‰å¥½åƒæ²¡ä»€ä¹ˆç‰¹åˆ«çš„ã€‚ `for-of`å¾ªç¯åˆ°åº•æœ‰ä»€ä¹ˆç‰¹åˆ«çš„åœ°æ–¹å‘¢, æˆ‘ä»¬é©¬ä¸Šæ¥çœ‹ï¼š

+ è¿™æ˜¯æœ‰å²ä»¥æ¥å¾ªç¯æ•°ç»„å…ƒç´ æœ€ç®€è¦ã€ç›´æ¥çš„è¯­æ³•ã€‚
+ ä»–é¿å…äº†æ‰€æœ‰`for-in`çš„å‘
+ ä¸åƒ`forEach()`, ä»–å¯ä»¥éšæ—¶`break`,`continue`,æˆ–è€…`return`ã€‚

`for-in`å¾ªç¯ç”¨æ¥å¾ªç¯å¯¹è±¡çš„å±æ€§ã€‚
`for-of`å¾ªç¯ç”¨æ¥å¾ªç¯ç±»ä¼¼åœ¨æ•°ç»„é‡Œçš„å€¼çš„æ•°æ®ã€‚

ä½†è¿™è¿˜ä¸æ˜¯å…¨éƒ¨ã€‚

## ä¹Ÿæœ‰åˆ«çš„æ•°æ®ç±»å‹æ”¯æŒfor-of

`for-of`å¾ªç¯ä¸æ­¢å¯ä»¥ç”¨åœ¨æ•°ç»„, ä¹Ÿå¯èƒ½åœ¨ç±»æ•°ç»„çš„å¯¹è±¡ä¸Šç”Ÿæ•ˆ, æ¯”å¦‚`NodeList`ã€‚

ä¹Ÿå¯èƒ½ä½œç”¨åœ¨å­—ç¬¦ä¸²ä¸Š, æŠŠå­—ç¬¦ä¸²å½“æˆUnicodeå­—æ¯çš„åºåˆ—ã€‚

```js
for (var chr of "ğŸ˜ºğŸ˜²") {
  alert(chr);
}
```

ä¹Ÿèƒ½åœ¨`map`å’Œ`Set`å¯¹è±¡ä¸Šç”Ÿæ•ˆã€‚

å™¢æŠ±æ­‰ã€‚ ä½ ä»æ¥æ²¡å¬è¿‡`Map`å’Œ`Set`å¯¹è±¡ï¼Ÿ ä»–ä»¬æ˜¯es6æ–°åŠ çš„ã€‚ ä»¥åä¼šæœ‰æ•´ç« æ¥è¯´ä»–ä»¬çš„ç‰¹ç‚¹ã€‚ å¦‚æœä½ åœ¨å…¶ä»–è¯­è¨€é‡Œç”¨è¿‡mapå’Œset, é‚£å¯¹ä½ æ¥è¯´ä¸æ˜¯å¤§å˜åŒ–ã€‚

æ¯”å¦‚, `Set`å¯¹è±¡æ˜¯ç”¨æ¥å»é‡çš„ï¼š

```js
//ç”¨ä¸€ä¸ªwordsçš„æ•°ç»„ç”Ÿæˆä¸€ä¸ªset
var uniqueWords = new Set(words);
```

ä¸€ä½†ä½ å¾—åˆ°äº†ä¸€ä¸ª`Set`, ä½ å°±å¯ä»¥æ¥ç®€å•å¾—å¾ªç¯ä»–ï¼š

```js
for (var word of uniqueWords) {
	console.log(word);
}
```

`Map`æœ‰ä¸€ç‚¹ç‚¹ä¸åŒï¼š é‡Œé¢çš„æ•°æ®ç”±é”®å€¼å¯¹ç»„æˆ, æ‰€ä»¥ä½ æƒ³`destructuring`æ¥æŠŠé”®å€¼æ‹†å¼€ï¼š

```js
For (var [key, value] of phoneBookMap) {
	console.log(key + "çš„ç”µè¯æ˜¯: " + value) ;
}
```

`destructuring`ä¹Ÿæ˜¯es6çš„ä¸€ä¸ªæ–°ç‰¹æ€§, æˆ‘ä¹Ÿä¼šå†™ä¸€ä¸ªä¸“é¢˜æ¥ä»‹ç»ä»–ã€‚

åˆ°äº†ç°åœ¨, ä½ å·²ç»æ„Ÿå—åˆ°äº†ï¼š jså·²ç»æœ‰äº†ä¸€äº›ä¸åŒçš„æ•°æ®ç±»å‹, è¿˜å¯èƒ½æ›´å¤šã€‚ `for-of`å°±æ˜¯ç”¨æ¥éå†ä»–ä»¬çš„ã€‚

`for-of`ä¸å¯ä»¥ç”¨åœ¨åŸç”Ÿçš„`Object`ä¸Šäº†, ä½†ä½ è¿˜æ˜¯æƒ³éå†å¯¹è±¡å±æ€§çš„è¯å¯ä»¥è¿™ä¹ˆç”¨ï¼š

```js
//æŠŠä¸€ä¸ªå¯¹è±¡å¯æšä¸¾çš„å±æ€§æ‰“å‡ºæ¥
for (var key of Object.keys(someObject)) {
	console.log(key + ":" + someObject[key]);
}
```




























---

es in depth ç³»åˆ— [ç›®å½•](/2016/09/10/es6-in-depth-content/) [åŸæ–‡åœ°å€](https://hacks.mozilla.org/category/es6-in-depth/)